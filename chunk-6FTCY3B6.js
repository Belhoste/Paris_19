import{a as de}from"./chunk-HG3BQU4A.js";import{a as le}from"./chunk-QJ5BCUED.js";import"./chunk-KL5D7QSD.js";import{a as ce}from"./chunk-CGAZJR52.js";import{A as Y,D as Z,E as ee,H as te,I as ie,J as ne,b as G,f as $,i as q,k as U,r as z,s as N,t as W,u as K}from"./chunk-W6KD5O3J.js";import{$a as y,Db as S,Ib as O,Jb as P,K as I,Ma as f,Na as _,Oa as k,Pa as F,Qa as w,Ra as p,Sa as t,Ta as a,Tb as j,U as m,Ua as v,X as L,Y as A,bb as M,db as d,dc as V,fc as B,h as E,j as D,nd as X,od as ae,p as g,pd as oe,qa as n,rb as r,rd as re,sb as C,tb as u,tc as H,td as se,uc as Q,v as b,vc as J,z as T,za as R}from"./chunk-RLW6EZLF.js";var me=()=>[""],pe=()=>["/places"],he=()=>["/people"],ue=(i,s)=>s.id;function ge(i,s){if(i&1&&(t(0,"span"),r(1),a()),i&2){let o=d().$implicit;n(),u(", ",o.description)}}function fe(i,s){if(i&1){let o=y();t(0,"div")(1,"span",11),r(2),a(),t(3,"mat-icon-button",12),M("click",function(){let l=L(o).$implicit,c=d(2);return A(c.goToDisplay(l.id))}),t(4,"mat-icon",13),r(5,"open_in_new"),a()(),f(6,ge,2,1,"span"),v(7,"hr"),a()}if(i&2){let o=s.$implicit;n(2),u("",o.label,"\xA0"),n(2),p("inline",!0),n(2),_(o.description?6:-1)}}function _e(i,s){if(i&1&&(t(0,"div",8)(1,"div",10),F(2,fe,8,3,"div",null,ue),a()()),i&2){let o=d();n(2),w(o.items)}}function ve(i,s){if(i&1){let o=y();t(0,"span",22),r(1),t(2,"mat-icon-button",12),M("click",function(){L(o);let l=d().$implicit,c=d(2);return A(c.goToDisplay(l.value.id))}),t(3,"mat-icon",23),r(4,"open_in_new"),a()()()}if(i&2){let o=d().$implicit;n(),u(" ",o.label,"\xA0 "),n(2),p("inline",!0)}}function Ce(i,s){if(i&1&&(t(0,"div",21),f(1,ve,5,2,"span",22),v(2,"br"),a()),i&2){let o=s.$implicit;n(),_(o?1:-1)}}function Se(i,s){if(i&1&&(t(0,"div",9)(1,"div",14)(2,"a",15),r(3),a(),t(4,"span"),r(5,"\xA0|\xA0"),a(),t(6,"a",15),r(7),a(),t(8,"span"),r(9,"\xA0|\xA0"),a(),t(10,"a",15),r(11),a(),t(12,"span"),r(13,"\xA0|\xA0"),a(),t(14,"a",16),r(15," Sparql query "),a()(),t(16,"div",17)(17,"mat-card",18)(18,"div",19),r(19),a(),t(20,"div",20),v(21,"hr"),t(22,"mat-card-content")(23,"div"),F(24,Ce,3,1,"div",21,k),a()()()()()()),i&2){let o=d();n(2),p("routerLink",S(7,me)),n(),C(o.home_page),n(3),p("routerLink",S(8,pe)),n(),C(o.places),n(3),p("routerLink",S(9,he)),n(),C(o.people),n(8),C(o.formerVisitsTitle),n(5),w(o.selectedItemsList)}}var He=(()=>{let s=class s{constructor(){this.changeDetector=m(j),this.request=m(ne),this.setLanguage=m(ce),this.lang=m(ae),this.lastSearchRoute=m(de),this.router=m(H),this.title="FactGrid",this.subTitle="a database on animal magnetism",this.advanced_search="advanced search",this.projects="research projects",this.fields="fields of reseach",this.places="places",this.home_page="Home",this.people="People",this.searchInput=new q,this.isDisplay=!1,this.data$=new E,this.searchQuery$=new D(""),this.items=[],this.baseGetURL="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=",this.getUrlSuffix="&format=json&origin=*",this.formerVisitsTitle="you have visited:",this.selectedItemsList=JSON.parse(localStorage.getItem("selectedItems"))}goToDisplay(e){this.lastSearchRoute.setLastSearchRoute(this.router.url),this.router.navigate(["/item",e])}ngOnInit(){this.places=this.lang.getTranslation("places",this.lang.selectedLang),this.people=this.lang.getTranslation("people",this.lang.selectedLang),this.home_page=this.lang.getTranslation("home_page",this.lang.selectedLang),this.subTitle=this.lang.getTranslation("FactGrid_subtitle",this.lang.selectedLang),this.advanced_search=this.lang.getTranslation("advanced_search",this.lang.selectedLang),this.projects=this.lang.getTranslation("projects",this.lang.selectedLang),this.fields=this.lang.getTranslation("fields",this.lang.selectedLang),this.formerVisitsTitle=this.lang.getTranslation("formerVisitsTitle",this.lang.selectedLang),this.selectedItemsList=this.selectedItemsList.filter(function(e){return e!==null}),this.pages=this.request.getStat().pipe(g(e=>Object.values(e)[1].statistics.pages)),console.log(this.selectedItemsList),this.labels=this.searchInput.valueChanges.pipe(T(400),I(e=>this.request.searchItem(e,this.lang.selectedLang)),g(e=>this.createList(e)),g(e=>e=="https://database.factgrid.de//w/api.php?action=wbgetentities&ids=&format=json&origin=*"?"https://database.factgrid.de//w/api.php?action=wbgetentities&ids=Q220375&format=json&origin=*":e),T(200),I(e=>this.request.getItem(e)),b(e=>e!==void 0),b(e=>e.entities!==void 0&&e.entities!==null),g(e=>Object.values(e.entities))).subscribe(e=>{this.items=this.setLanguage.item(e,this.lang.selectedLang),this.isDisplay=!0,this.items[0].id=="Q220375"&&(this.isDisplay=!1),this.changeDetector.detectChanges()})}createList(e){let l="",c="",h=e.search;h===void 0?h=[]:h=h;for(let x=0;x<h.length;x++)l=l+"|"+h[x].id;return l=l.slice(1),c=this.baseGetURL+l+this.getUrlSuffix,c}addParis(e){e="Paris, "+e}ngOnDestroy(){this.labels.unsubscribe()}};s.\u0275fac=function(l){return new(l||s)},s.\u0275cmp=R({type:s,selectors:[["app-search"]],decls:17,vars:7,consts:[[1,"prosopo-header"],[1,"prosopo-title"],[1,"prosopo-subtitle"],["appearance","outlined",1,"mat-elevation-z12"],[1,"search-center2"],["matInput","","placeholder","Ex. Goethe","value","Goethe",3,"formControl"],["align","end"],[1,"search-center"],[1,"searchListSize"],[1,"search-top-margin"],[1,"details"],[1,"search-label"],["type","button",1,"internalLink",3,"click"],["color","primary",3,"inline"],[1,"search-center","router-links"],[3,"routerLink"],["href","https://database.factgrid.de/query/#%23model%0A%0ASELECT%20%3Fitem%20%3Fviewer%20%3FitemLabel%20%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%3Fitem%20wdt%3AP2%20wd%3AQ7%3B%0A%20%20%20%20%20%20%20%20wdt%3AP247%20wd%3AQ24708.%0A%20%20BIND%28STRAFTER%28STR%28%3Fitem%29%2C%20STR%28wd%3A%29%29%20AS%20%3FitemId%29%0A%20%20BIND%28IRI%28CONCAT%28%22https%3A%2F%2Fdatabase.factgrid.de%2Fviewer%2Fitem%2F%22%2C%20%3FitemId%29%29%20AS%20%3Fviewer%29%0A%7D%0A"],[1,"search-itemSelected"],["appearance","outlined",1,"search-itemSelected-mat-card"],[1,"selectedListTitle2"],[1,"selectedItemSize"],[1,"labelTitlePadding"],[1,"selectedItemText"],[1,"whiteButton",3,"inline"]],template:function(l,c){l&1&&(t(0,"div",0)(1,"div",1),r(2," FactGrid "),a(),t(3,"div",2),r(4),a()(),t(5,"mat-card",3)(6,"mat-card-content")(7,"div")(8,"div",4)(9,"mat-form-field"),v(10,"input",5),t(11,"mat-hint",6),r(12),O(13,"async"),a()()()()(),t(14,"div",7),f(15,_e,4,0,"div",8),f(16,Se,26,10,"div",9),a()()),l&2&&(n(4),u(" ",c.subTitle," "),n(6),p("formControl",c.searchInput),n(2),u("",P(13,5,c.pages)," items"),n(3),_(c.isDisplay==!0?15:-1),n(),_(c.isDisplay==!1?16:-1))},dependencies:[B,J,Q,N,G,$,U,z,ie,te,Z,Y,ee,le,K,W,X,se,oe,re,V],styles:[".search-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.HU-div[_ngcontent-%COMP%]{height:150px;display:flex;align-items:center;justify-content:center}.HUTitle-div[_ngcontent-%COMP%]{padding-left:10px;color:#ad1457;font-weight:600;font-size:60px}.search-label[_ngcontent-%COMP%]{font-weight:700}.search-itemSelected[_ngcontent-%COMP%]{margin-top:50px}.selectedItemSize[_ngcontent-%COMP%]{font-size:14px}.search-top-margin[_ngcontent-%COMP%]{margin-top:20px}"]});let i=s;return i})();export{He as SearchComponent};
